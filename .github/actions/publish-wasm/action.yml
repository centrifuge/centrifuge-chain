name: Publish WASM artifact
description: publish the wasm artifact to one or multiple destinations
# inputs:
#   RUST_TOOLCHAIN:
#     description: toolchain version
#     required: false
#     default: "nightly-2022-05-09"
runs:
  using: composite
  steps:
    - name: Prep build on Ubuntu
      id: ubuntu_prep
      shell: sh
      run: |
        # - if: startsWith(matrix.target, 'build-runtime')
        #   name: Setup - gcloud / gsutil
        #   uses: google-github-actions/setup-gcloud@v0
        #   with:
        #     service_account_key: ${{ secrets.GCS_SA_KEY }}
        #     project_id: ${{ secrets.GCS_PROJECT }}
        #     export_default_credentials: true
        # - if: ${{ matrix.target == 'build-runtime' && matrix.package == 'altair-runtime' }}
        #   name: Publish to GCS
        #   run: |
        #     gsutil cp ./runtime/altair/target/srtool/release/wbuild/altair-runtime/altair_runtime.compact.compressed.wasm gs://centrifuge-artifact-releases/parachain/altair_runtime-$(git rev-parse --short HEAD).compact.compressed.wasm
        # - if: ${{ matrix.target == 'build-runtime-fast' && matrix.package == 'altair-runtime' }}
        #   name: Publish to GCS
        #   run: |
        #     gsutil cp ./runtime/altair/target/srtool/release/wbuild/altair-runtime/altair_runtime.compact.compressed.wasm gs://centrifuge-artifact-releases/test-parachain/altair_runtime-$(git rev-parse --short HEAD).compact.compressed.wasm
        # - if: ${{ matrix.target == 'build-runtime' && matrix.package == 'centrifuge-runtime' }}
        #   name: Publish to GCS
        #   run: |
        #     gsutil cp ./runtime/centrifuge/target/srtool/release/wbuild/centrifuge-runtime/centrifuge_runtime.compact.compressed.wasm gs://centrifuge-artifact-releases/parachain/centrifuge_runtime-$(git rev-parse --short HEAD).compact.compressed.wasm
        # - if: ${{ matrix.target == 'build-runtime-fast' && matrix.package == 'centrifuge-runtime' }}
        #   name: Publish to GCS
        #   run: |
        #     gsutil cp ./runtime/centrifuge/target/srtool/release/wbuild/centrifuge-runtime/centrifuge_runtime.compact.compressed.wasm gs://centrifuge-artifact-releases/test-parachain/centrifuge_runtime-$(git rev-parse --short HEAD).compact.compressed.wasm